---
title: "Rubyコーディング時に検討すること"
emoji: "🟥🖊️"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: [Ruby, コーディングプロセス]
publwished: false
---

## コーディング手順

- コーディング前にフォーマットに記載
- 作成する箇所を検討
- 時間の見積もり
- 注意事項に従いコーディング
- 時間内に終わらなかったら、理由を振り返り（もう一度同じことをして、もっと早く完成できるか検討する）
- コーディング後、push前に注意事項をチェック
- 共有用の簡単な説明のフォーマットに記載

## コーディング前のフォーマット

コーディング前に以下のフォーマットを使用すると、どこから手をつけるか考えやすい。

```markdown
## 仕様を分解する

 1. 追加の仕様が必要となる背景を把握
     - どういう立場のユーザーが
     - いつ、どんな頻度でその機能を使い
     - その機能を使ってどんなことをするのか
 2. 現状を把握する（既存のコードがあれば、1に関係する機能を確認する）
 3. 追加仕様を把握する
    1. 追加仕様（あるべき姿）
    2. 追加仕様を機能に分割化
    3. 現状の機能との差分を確認
 4. 機能をタスク化して優先順位を決める
    1. タスク一覧作成
    2. タスクの作業時間を見積もる

## コードの構成を考える

1. 追加機能に見合うコードの構成を検討
   1. 入力と出力は何か？
   2. データ構造はどうすればいいか？
2. テストの構成を検討（正常系、異常系、セキュリティ）
3. 検討したコード構成に合うライブラリ探す
```

## フォーマット詳細

### タスクリスト作成

タスク作成時の注意事項

- 1タスクは30分以内にする
- 調査に時間がかかりそうなら、別タスクに切り分け、調査のステップごとにさらに切り分ける
- タスクリストは簡単に他の人にレビューしてもらうとなお良い
- タスクにかかる時間がオーバーした時は、軽くそこまでの流れを振り返って、時間がかかったことの内容をメモしておく（何度も繰り返さないために）

## コーディングの手順

1. テストコードを書く
2. 空のメソッドでメインのコードを書く
3. テストして、パスすれば徐々にメソッドの中身を書いていき、テストを繰り返す
4. メソッドをクラス化
5. 清書

## コーディング中の注意事項

- コーディング中に検索した内容は、検索結果で学んだことをメモする
- 15分ハマってChatGPTに聞いてもダメなら、他の人に聞く
- 原則
  - Fake It(ロジックらしいロジックがない固定の値を返すような仮実装のこと(メソッドとテストコードがリンクしているかの疎通確認）)
  - KISS原則（Keep it simple, stupid.）：必要性の曖昧な機能をいたずらに追加するのではなく、可能な限りシンプルにする（バカでも治せるコードに）
  - YAGNI原則（You Ain't Gonna Need It）：将来必要になるかもという見込みや憶測で機能を追加することは戒めるべきである（無駄な工数削減やバグ回避に）
  - DRY原則（Don't Repeat Yourself）：同じ情報は分散させずに、一箇所で管理すること

### Rubyおまじない

```ruby
#!/usr/bin/env ruby
#frozen_string_literal: true
```

## コーディング後の注意事項（push前にチェックすること）

```markdown
- [ ] rubocopをパスしているか？
- [ ] 組み込み・標準添付ライブラリの単語を使っているか？
- [ ] クラスは名詞、メソッドは動詞か？
- [ ] 頻出名詞をクラスに抜き出しているか？
- [ ] ハッシュテーブルによる分岐数削減しているか？
- [ ] push先とpushするbranchは正しいか？
- [ ] PR先は正しいか？
- [ ] 引数のないメソッドは可読性のためインスタンス変数っぽく名詞の名前をつけているか？
- [ ] 1メソッドは五行以内に収めるているか？
- [ ] 4つの原則に従っているか？
```

## 共有用の簡単な説明フォーマット

1. 追加した機能の目的
2. 機能の概要
3. 非追加機能
4. データ構造
